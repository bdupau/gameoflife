<html>
	<head>
		<meta charset="utf-8"/>
		<style>
			td {
				width: 5px;
				height: 5px;
			}
			td.dead {
				background-color: rgb(200,200,200);
			}
			td.alive {
				background-color: rgb(255,0,0);
			}
		</style>
	</head>
	<body>
		<table id="t">
		</table>
		<button onClick="javascript:go();">
			step
		</button>
		<button onClick="javascript:stop();">
			stop
		</button>
		play: slow
		<input type="range" min=10 max=500 step=10 name="slider" onchange="speed = 510-this.value; javascript:stop();javascript:play();">
		fast
		<script>
			var size = 100;
			var speed = 250;

			function toggle(matrix,rij,kol) {
				matrix[rij][kol] = 1 - matrix[rij][kol]
			}

			function ncount(matrix,rij,kol) {
				//tel het aantal levende buren
				result = 0;
				for (var i = Math.max(0, rij-1); i < Math.min(size, rij+2); i++) {
					for (var j = Math.max(0, kol-1); j < Math.min(size, kol+2); j++) {
						result += matrix[i][j];
					}
				}
				return result - matrix[rij][kol];
			}

			function life(old) {
				// pas de life regels toe op een matrix
				// geeft een nieuwe matrix terug
				var result = new Array(size);
				for (var i = 0; i < size; i++) {
					result[i] = new Array(size);
					for (var j = 0; j < size; j++) {
						result[i][j] = 0;
						var count = ncount(old,i,j);
						if (old[i][j] == 1 && (count == 2 || count == 3)) {result[i][j] = 1; }		
						if (old[i][j] == 0 && count == 3) {result[i][j] = 1; }
					}
				}
				return result;
			}

			var n = new Array(size);
			for (var i = 0; i < size; i++) {
				n[i] = new Array(size);
				for (var j = 0; j < size; j++) {
					n[i][j] = 0;
				}
			}

			toggle(n,4,5); // maak een 'glider' patroon
			toggle(n,5,6);
			toggle(n,6,4);
			toggle(n,6,5);
			toggle(n,6,6);
			for (var i = 45; i < 55; i++) { //maak een streep
				toggle(n,50,i);
			}

			function go() {
				n = life(n);
				t(n);
			}

			table = document.getElementById("t");

			function toggleCell(cell) {
				a = JSON.parse(cell.id);
				i = a[0];
				j = a[1];
				if (n[i][j] == 0) { n[i][j] = 1; cell.className = "alive"; } else { n[i][j] = 0; cell.className = "dead";}
			}

			for (var i = 0; i < size; i++) {
				row = table.insertRow(i);
				for (var j = 0; j < size; j++) {
					cell = row.insertCell(j);
					cell.id = "["+i+","+j+"]";
					cell.innerHTML = " ";
					cell.className = "dead";
					cell.addEventListener("click", function(){toggleCell(this);});
				}
			}

			function t(matrix) {
				for (var i = 0; i < size; i++) {
					for (var j = 0; j < size; j++) {
						cell = document.getElementById("["+i+","+j+"]");
						if (matrix[i][j] == 1) {
							cell.className = "alive";
						} else {
							cell.className = "dead";
						}
					}
				}
			}

			t(n);
			var playiv;

			function play(){
				playiv = setInterval(go, speed);
			}

			function stop(){
				clearInterval(playiv);
			}
		</script>
	</body>
</html>